(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{125:function(t,e,n){"use strict";var i=n(85);n.n(i).a},126:function(t,e,n){"use strict";n(58),n(78);var i=n(87),a=(n(13),n(16)),o=(n(19),n(22)),s=n(18),r={name:"FunUIUpload",components:{FIcon:o.a},data:function(){return{mutableFileList:[],waitingForSubmit:{}}},props:{accept:String,method:{type:String,default:"post"},action:{type:String,required:!0},name:{type:String,required:!0},parseResponse:{type:Function,required:!0},fileList:{type:Array,default:function(){return[]}},listType:{type:String,default:"text",validator:function(t){return["text","picture","picture-card"].indexOf(t)>=0}},maxSize:Number,multiple:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},autoUpload:{type:Boolean,default:!0}},created:function(){this.mutableFileList=this.fileList,this.mutableAutoUpload=this.autoUpload},mounted:function(){var t=this;this.draggable&&this._handleDragAndDropListener("addEventListener"),this.$once("hook:beforeDestroy",function(){t._handleDragAndDropListener("removeEventListener")})},methods:{liClasses:function(t){var e;return e={},Object(a.a)(e,"".concat(this.listType),this.listType),Object(a.a)(e,"".concat(t),t),e},onClickToSelectFile:function(){this.$refs.inputRef.value=null,this.$refs.inputRef.click()},_handleDragAndDropListener:function(t){var e=this.$refs.triggerAreaRef;e[t]("dragenter",this.onDragEnter),e[t]("dragover",this.onDragOver),e[t]("drop",this.onDrop)},onDragEnter:function(t){t.stopPropagation(),t.preventDefault()},onDragOver:function(t){t.stopPropagation(),t.preventDefault()},onDrop:function(t){t.stopPropagation(),t.preventDefault(),this.createFormDataAndUpload(t.dataTransfer.files)},onChange:function(){this.createFormDataAndUpload(this.$refs.inputRef.files)},createFormDataAndUpload:function(t){for(var e=0;e<t.length;e++){var n=new FormData;n.append(this.name,t[e]);var i=this.handleBeforeUpload(t[e]);!i||this.mutableAutoUpload?i&&this.handleUpload(n,i):this.waitingForSubmit[i]=n}},handleBeforeUpload:function(t){var e=t.name,n=t.size,a=t.type;if(!this.checkFileSize(t)){var o="".concat(parseInt(Math.random()*Math.pow(10,8)));return this.mutableFileList.push({name:e,size:n,type:a,alias:o,status:this.mutableAutoUpload?"uploading":"waiting"}),this.$emit("update:file-list",Object(i.a)(this.mutableFileList)),o}},requiredParam:function(){throw new Error("alias is required")},handleUpload:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.requiredParam();this.mutableAutoUpload&&s.a[this.method.toLowerCase()](this.action,{formData:t,alias:e,handleLoad:this.handleLoad,handleUploadProgress:this.handleUploadProgress,handleAbort:this.handleAbort,handleError:this.handleError})},submit:function(){var t=this;"{}"!==JSON.stringify(this.waitingForSubmit)&&(this.mutableAutoUpload=!0,this.mutableFileList.filter(function(t){return"waiting"===t.status}).map(function(t){return t.status="uploading"}),Object.keys(this.waitingForSubmit).map(function(e){return t.handleUpload(t.waitingForSubmit[e],e)}),this.mutableAutoUpload=!1,this.waitingForSubmit={})},handleLoad:function(t){var e=this.parseResponse(t.response),n=this.findObjectInArray({alias:t.alias},this.mutableFileList).object;n&&(n.url=e.url,n.status="succeeded",this.$emit("success",{fileInfo:n}),this.$emit("update:file-list",Object(i.a)(this.mutableFileList)))},handleUploadProgress:function(t){this.$on("abortUpload",function(e){return t.alias===e&&t.abort()})},handleAbort:function(t){this.removeItemFromMutableFileList(t.alias)},handleError:function(t){var e=this.findObjectInArray({alias:t.alias},this.mutableFileList).object;e&&(e.status="failed",this.$emit("error",{fileInfo:e,xhr:t}),this.$emit("update:file-list",Object(i.a)(this.mutableFileList)))},handleRemove:function(t){var e=t.alias,n=t.url,i=t.status;if(!n&&"uploading"===i)return this.$emit("abortUpload",e);"waiting"===i&&delete this.waitingForSubmit[e],"succeeded"===i&&this.$emit("remove",{fileInfo:t}),this.removeItemFromMutableFileList(e)},checkFileSize:function(t){var e=t.name,n=t.size,i=t.type,a=this.maxSize&&n/1024>this.maxSize;return a&&this.$emit("error",{fileInfo:{name:e,size:n,type:i},isExceeded:!0}),a},removeItemFromMutableFileList:function(t){var e=this.findObjectInArray({alias:t},this.mutableFileList).index;e<0||(this.mutableFileList.splice(e,1),this.$emit("update:file-list",Object(i.a)(this.mutableFileList)))},findObjectInArray:function(t,e){var n=Object.keys(t)[0];if("string"!=typeof n)throw new Error("Key of param 1 should be a string");if(!e.every(function(t){return"object"===Object(s.d)(t)}))throw new Error("Param 2 contains non-object element.");var i=e.map(function(t){return t[n]}).indexOf(t[n]);return{index:i,object:e[i]}}}},l=(n(125),n(1)),c=Object(l.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"f-upload"},[n("div",{ref:"triggerAreaRef",staticClass:"f-upload-trigger-area",on:{click:t.onClickToSelectFile}},[t._t("default")],2),t._v(" "),n("div",[t._t("tips")],2),t._v(" "),t.autoUpload?t._e():n("div",{staticClass:"f-upload-submit-area",on:{click:t.submit}},[t._t("submit")],2),t._v(" "),n("input",{ref:"inputRef",attrs:{type:"file",name:t.name,accept:t.accept,multiple:t.multiple},on:{change:t.onChange}}),t._v(" "),n("transition-group",{attrs:{name:"bounce",tag:"ul"}},t._l(t.mutableFileList,function(e){return n("li",{key:e.alias,staticClass:"f-upload-list-li",class:t.liClasses(e.status)},["uploading"===e.status?n("f-icon",{staticClass:"f-upload-loading-icon",attrs:{name:"loading"}}):t._e(),t._v(" "),n("img",{attrs:{src:e.url}}),t._v(" "),n("span",{staticClass:"f-upload-file-name"},[t._v(t._s(e.name))]),t._v(" "),"succeeded"===e.status?n("f-icon",{staticClass:"f-upload-circle-check-icon",attrs:{name:"circle-check"}}):t._e(),t._v(" "),n("f-icon",{staticClass:"f-upload-remove-icon",attrs:{name:"picture-card"===t.listType?"trash-can":"cross"},on:{click:function(n){return t.handleRemove(e)}}})],1)}),0)],1)},[],!1,null,"96207ee0",null);e.a=c.exports},17:function(t,e,n){},337:function(t,e,n){},40:function(t,e,n){},46:function(t,e,n){"use strict";var i=n(16),a=(n(48),n(13),n(22)),o=n(18),s={name:"FunUIButton",components:{FIcon:a.a},props:{icon:{type:String},iconPosition:{type:String,default:"left",validator:function(t){return"left"===t||"right"===t}},type:{type:String,default:"default",validator:function(t){return Object(o.f)(t,["default","primary","info","success","warning","danger"])}},round:{type:Boolean,default:!1},small:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},computed:{n2c:function(){return Object(o.g)(this.$options.name)},classes:function(){var t,e=this.n2c,n=this.type,a=this.round,o=this.small,s=this.disabled;return[e(),(t={},Object(i.a)(t,"".concat(e(n)),n),Object(i.a)(t,"".concat(e("round")),a),Object(i.a)(t,"".concat(e("small")),o),Object(i.a)(t,"".concat(e("disabled")),s),t)]}},methods:{onClick:function(t){!this.disabled&&this.$emit("click",t)}}},r=(n(49),n(1)),l=Object(r.a)(s,function(){var t,e=this,n=e.$createElement,i=e._self._c||n;return i("button",{class:e.classes,on:{click:e.onClick}},[e.icon?i("f-icon",{class:(t={},t["icon-"+e.iconPosition]=e.$slots.default,t),attrs:{name:e.icon}}):e._e(),e._v(" "),e._t("default")],2)},[],!1,null,"46175b28",null);e.a=l.exports},49:function(t,e,n){"use strict";var i=n(17);n.n(i).a},671:function(t,e,n){"use strict";var i=n(337);n.n(i).a},74:function(t,e,n){"use strict";var i,a=n(73),o=n(16),s=(n(13),n(19),n(22)),r=n(18),l={name:"FunUIToast",components:{FIcon:s.a},props:{message:{type:String},autoCloseDelay:{type:Number,default:3},closeIcon:{type:Boolean,default:!1},onClose:{type:Function,default:function(){return function(){}}},enableHTML:{type:Boolean,default:!1},position:{type:String,default:"top",validator:function(t){return["top","middle","bottom"].indexOf(t)>=0}},state:{type:String,default:"default",validator:function(t){return Object(r.f)(t,["default","success","error","warning","primary"])}}},computed:{n2c:function(){return Object(r.g)(this.$options.name)},classes:function(){return[this.n2c("container"),Object(o.a)({},"position-".concat(this.position),!0)]}},mounted:function(){this.handleAutoClose()},methods:{handleAutoClose:function(){var t=this;setTimeout(function(){return t.close()},1e3*this.autoCloseDelay)},close:function(){this.$el.remove(),this.$emit("close"),this.onClose&&this.onClose(),this.$destroy()},onClickCloseIcon:function(){this.close()}}},c=(n(76),n(1)),u=Object(c.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.classes},[n("div",{class:[t.n2c(),t.state]},[n("div",{ref:"messageContainer",class:t.n2c("message-container")},[t.enableHTML?n("div",{domProps:{innerHTML:t._s(t.message)}}):n("div",[t._v(t._s(t.message))])]),t._v(" "),t.closeIcon?n("div",{class:t.n2c("close-icon-container"),on:{click:t.onClickCloseIcon}},[n("f-icon",{class:t.n2c("close-icon"),attrs:{name:"cross"}})],1):t._e()])])},[],!1,null,"27d922b4",null).exports;e.a={install:function(t,e){t.prototype.$toast=function(e,n){i&&i.close(),i=function(t){var e=t.Vue,n=t.message,i=t.propsData,o=t.onClose,s=new(e.extend(u))({propsData:Object(a.a)({message:n},i)});return s.$mount(),s.$on("close",o),document.body.appendChild(s.$el),s}({Vue:t,message:e,propsData:n,onClose:function(){i=null}})}}}},750:function(t,e,n){"use strict";n.r(e);var i=n(0),a=n(126),o=n(46),s=n(74);i.a.use(s.a);var r={name:"demo-upload-4",components:{FUpload:a.a,FButton:o.a},data:function(){return{fileList:[],html:'\n        <f-upload\n          action="https://upload-file-demo-on-heroku.herokuapp.com/upload/"\n          name="myFile"\n          :parse-response="parseResponse"\n          :max-size="300"\n          :file-list.sync="fileList"\n          @success="onSuccess"\n          @error="onError"\n          @remove="onRemove"\n        >\n          <f-button icon="upload">上传</f-button>\n        </f-upload>\n      ',javascript:"\n        data() {\n          return {\n            fileList: [],\n          };\n        },\n        methods: {\n          parseResponse(response) {\n            const fileInfo = JSON.parse(response);\n            return {\n              name: fileInfo.originalname,\n              url: 'https://upload-file-demo-on-heroku.herokuapp.com/preview/' + fileInfo.filename,\n            };\n          },\n          onSuccess($event) {\n            this.$toast('上传成功', { state: 'success' });\n          },\n          onRemove($event) {\n            this.$toast('删除成功', { state: 'success' });\n          },\n          onError($event) {\n            $event.isExceeded && this.$toast('文件太大', { state: 'error' });\n          },\n        },\n      "}},methods:{parseResponse:function(t){var e=JSON.parse(t);return{name:e.originalname,url:"https://upload-file-demo-on-heroku.herokuapp.com/preview/"+e.filename}},onSuccess:function(t){this.$toast("上传成功",{state:"success"})},onRemove:function(t){this.$toast("删除成功",{state:"success"})},onError:function(t){t.isExceeded&&this.$toast("文件太大",{state:"error"})}}},l=(n(671),n(1)),c=Object(l.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"demo-upload-4 extra-margin"},[t._v("\n  已上传的文件信息："+t._s(t.fileList)+"\n  "),n("f-upload",{attrs:{action:"https://upload-file-demo-on-heroku.herokuapp.com/upload/",name:"myFile","parse-response":t.parseResponse,"max-size":300,"file-list":t.fileList},on:{"update:fileList":function(e){t.fileList=e},"update:file-list":function(e){t.fileList=e},success:t.onSuccess,error:t.onError,remove:t.onRemove}},[n("f-button",{attrs:{icon:"upload"}},[t._v("上传")])],1),t._v(" "),n("code-box",{attrs:{code:{html:t.html,javascript:t.javascript}}})],1)},[],!1,null,"514e86bb",null);e.default=c.exports},76:function(t,e,n){"use strict";var i=n(40);n.n(i).a},85:function(t,e,n){}}]);